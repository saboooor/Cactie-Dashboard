<%- include("partials/header", { bot, user, path, title: `General | ${guild.name}` }) %>
<% const commands = ['awooga', 'bite', 'bonk', 'giggle', 'hug', 'kill', 'kiss', 'lick', 'mad', 'nuzzle', 'stare', 'approve', 'ban', 'clear', 'deny', 'implement', 'kick', 'mute', 'react', 'reactionroles', 'settings', 'unban', 'unmute', 'duck', 'goose', 'kitty', 'lizard', 'meerkat', 'monkey', 'puppy', 'raccoon', 'redpanda', 'snake', 'Ban Member', 'Get Raw Embed JSON', 'Get Raw Message', 'Kick Member', 'Do action on user', 'User Info', '21questions', '8ball', 'animal', 'boner', 'buttons', 'coinflip', 'instaboner', 'meme', 'rate', 'rockpaperscissors', 'tictactoe', '247', 'cleareffects', 'clearqueue', 'effect', 'eq', 'forceskip', 'join', 'leave', 'loop', 'loopqueue', 'move', 'nowplaying', 'pause', 'play', 'playtop', 'queue', 'removesong', 'resume', 'reverse', 'search', 'seek', 'shuffle', 'skip', 'sponsorblock', 'stats', 'stop', 'volume', 'blowjob', 'confused', 'cum', 'dick', 'dilf', 'femdom', 'furryporn', 'futanari', 'gay', 'hentai', 'jackoff', 'lesbian', 'milf', 'nsfwgifs', 'nudes', 'oppai', 'petite', 'pussy', 'r34', 'thick', 'thighs', 'tits', 'trap', 'yuri', 'crash', 'dm', 'eval', 'psa', 'reload', 'reloadcmds', 'reloadcontext', 'transcript', 'add', 'close', 'delete', 'forcedelete', 'open', 'remove', 'resolved', 'subticket', 'ticket', 'voiceticket', 'avatar', 'color', 'help', 'invite', 'language', 'mcstats', 'ping', 'poll', 'reactions', 'server', 'serverjar', 'suggest', 'timings', 'userinfo', 'wallpaper']; %>

<br><br><br><br>
<section class="hero is-black">
  <div class="hero-body">
    <div class="columns">
      <div class="column is-one-fifth">
        <aside class="menu floating">
          <p class="menu-label">
            <img width="32px" style="border-radius: 16px; vertical-align: middle; margin-right: 2px;" src="<%= guild.icon ? `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}` : '/assets/images/placeholder.svg' %>">
            <%= guild.name %>
          </p>
          <p class="menu-label">
            General
          </p>
          <ul class="menu-list">
            <li><a href="#general">General Settings</a></li>
            <li><a href="#suggestions">Suggestions / Polls</a></li>
            <li><a href="#boner">Boner Command</a></li>
          </ul>
          <p class="menu-label">
            Administration
          </p>
          <ul class="menu-list">
            <li><a href="#logging">Logging</a></li>
            <li><a href="#tickets">Ticket System</a></li>
            <li><a href="#moderation">Moderation</a></li>
          </ul>
          <br>
      <form action="/settings/<%= guild.id %>" method="POST">
            <button type="submit" class="button is-success is-outlined is-rounded">
              <i data-feather="save" style="margin-right:10px"></i>
              Save
            </button>
        </aside>    
      </div>
      <div class="column">

        <% if (alert) { %>
          <div class="notification is-success">
            <%= alert %>
          </div>
        <% } %>
        <br id="general">
        <a class="title">General</a>
        <br><br>

        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Prefix</p>
              <p class="subtitle">The bot's text command prefix</p>
              <div class="control">
                <input class="input" type="text" name="prefix" value="<%= settings.prefix %>" placeholder="Your prefix">
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Reactions</p>
              <p class="subtitle">Reacts with various reactions on some words</p>
              <div class="select" style="width: 100%;">
                <select name="reactions" value="<%= settings.reactions %>" placeholder="The value" style="width: 100%;">
                  <option value="false" <% if (settings.reactions === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <option value="true" <% if (settings.reactions === 'true') {%> selected <%} else {%> <%} %>>Enabled</option>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Language</p>
              <p class="subtitle">The language Cactie will use (overrides the server language)</p>
              <div class="select" style="width: 100%;">
                <select name="language" value="<%= settings.language %>" placeholder="The value" style="width: 100%;">
                  <option value="false" <% if (settings.language === 'false') {%> selected <%} else {%> <%} %>>Use the server default</option>
                  <option value="English" <% if (settings.language === 'English') {%> selected <%} else {%> <%} %>>English</option>
                  <option value="Portuguese" <% if (settings.language === 'Portuguese') {%> selected <%} else {%> <%} %>>Portuguese</option>
                  <option value="Lispuwu" <% if (settings.language === 'Lispuwu') {%> selected <%} else {%> <%} %>>Lisp UwU</option>
                  <option value="Uwu" <% if (settings.language === 'Uwu') {%> selected <%} else {%> <%} %>>UwU</option>
                </select>
              </div>
            </article>
          </div>
        </div>

        <br id="suggestions">
        <a class="title">Suggestions / Polls</a>
        <br><br>

        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Suggestion Channel</p>
              <p class="subtitle">The channel where the bot puts suggestions in</p>
              <div class="select" style="width: 100%;">
                <select name="suggestionchannel" value="<%= settings.suggestionchannel %>" placeholder="The suggestion channel" style="width: 100%;">
                  <option value="false" <% if (settings.suggestionchannel === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.channels.cache.forEach(channel => { %>
                    <% if (channel.type != Djs.ChannelType.GuildText) return %>
                    <option value="<%= channel.id %>" <% if (channel.id === settings.suggestionchannel) {%> selected <%} else {%> <% } %> > <%= `# ${channel.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Suggestion Threads</p>
              <p class="subtitle">Creates a thread for discussion when a suggestion is created</p>
              <div class="select" style="width: 100%;">
                <select name="suggestthreads" value="<%= settings.suggestthreads %>" placeholder="The value" style="width: 100%;">
                  <option value="false" <% if (settings.suggestthreads === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <option value="true" <% if (settings.suggestthreads === 'true') {%> selected <%} else {%> <%} %>>Enabled</option>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Poll Channel</p>
              <p class="subtitle">The channel where the bot puts polls in</p>
              <div class="select" style="width: 100%;">
                <select name="pollchannel" value="<%= settings.pollchannel %>" placeholder="The poll channel" style="width: 100%;">
                  <option value="false" <% if (settings.pollchannel === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.channels.cache.forEach(channel => { %>
                    <% if (channel.type != Djs.ChannelType.GuildText) return %>
                    <option value="<%= channel.id %>" <% if (channel.id === settings.pollchannel) {%> selected <%} else {%> <% } %> > <%= `# ${channel.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
        </div>

        <br id="boner">
        <a class="title">Boner Command</a>
        <br><br>

        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Max PP Size</p>
              <p class="subtitle">Maximum pp size in boner and instaboner commands</p>
              <div class="control">
                <input class="input" type="number" name="maxppsize" value="<%= settings.maxppsize %>" placeholder="The maximum PP size to set">
              </div>
            </article>
          </div>
        </div>

        <br id="logging">
        <a class="title">Logging</a>
        <br><br>

        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Join Message</p>
              <p class="subtitle">The message when someone joins the server</p>
              <div class="control">
                <textarea class="textarea" type="text" name="joinmessage" value="<%= settings.joinmessage %>" placeholder="The join message, or just 'false'"></textarea>
              </div>
              <p>Variables: {USER MENTION} {USER TAG}</p>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Leave Message</p>
              <p class="subtitle">The message when someone leaves the server</p>
              <div class="control">
                <textarea class="textarea" type="text" name="leavemessage" value="<%= settings.leavemessage %>" placeholder="The leave message, or just 'false'"></textarea>
              </div>
              <p>Variables: {USER MENTION} {USER TAG}</p>
            </article>
          </div>
        </div>
        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Audit Logs</p>
              <p class="subtitle">Logs certain events in the guild</p>
              <div class="control">
                <select name="auditlogs" multiple data-type="tags" data-placeholder="The logs to enable">
                  <option value="member" <% if (settings.auditlogs.split(',').includes('member')) {%> selected <%} else {%> <%} %>>All Member-Related Logs</option>
                  <option value="memberjoin" <% if (settings.auditlogs.split(',').includes('memberjoin')) {%> selected <%} else {%> <%} %>>Member Joined</option>
                  <option value="memberleave" <% if (settings.auditlogs.split(',').includes('memberleave')) {%> selected <%} else {%> <%} %>>Member Left</option>
                  <option value="channel" <% if (settings.auditlogs.split(',').includes('channel')) {%> selected <%} else {%> <%} %>>All Channel-Related Logs</option>
                  <option value="channelcreate" <% if (settings.auditlogs.split(',').includes('channelcreate')) {%> selected <%} else {%> <%} %>>Channel Created</option>
                  <option value="channeldelete" <% if (settings.auditlogs.split(',').includes('channeldelete')) {%> selected <%} else {%> <%} %>>Channel Deleted</option>
                  <option value="voice" <% if (settings.auditlogs.split(',').includes('voice')) {%> selected <%} else {%> <%} %>>All Voice-Related Logs</option>
                  <option value="voicejoin" <% if (settings.auditlogs.split(',').includes('voicejoin')) {%> selected <%} else {%> <%} %>>Joined Voice Channel</option>
                  <option value="voiceleave" <% if (settings.auditlogs.split(',').includes('voiceleave')) {%> selected <%} else {%> <%} %>>Left Voice Channel</option>
                  <option value="voicemove" <% if (settings.auditlogs.split(',').includes('voicemove')) {%> selected <%} else {%> <%} %>>Moved Voice Channels</option>
                  <option value="voicedeafen" <% if (settings.auditlogs.split(',').includes('voicedeafen')) {%> selected <%} else {%> <%} %>>Voice Deafened</option>
                  <option value="voicemute" <% if (settings.auditlogs.split(',').includes('voicemute')) {%> selected <%} else {%> <%} %>>Voice Muted</option>
                  <option value="all" <% if (settings.auditlogs.split(',').includes('all')) {%> selected <%} else {%> <%} %>>All Logs</option>
                </select>
              </div> 
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Log Channel</p>
              <p class="subtitle">The channel where the bot puts various logs in</p>
              <div class="select" style="width: 100%;">
                <select name="logchannel" value="<%= settings.logchannel %>" placeholder="The log channel" style="width: 100%;">
                  <option value="false" <% if (settings.logchannel === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.channels.cache.forEach(channel => { %>
                    <% if (channel.type != Djs.ChannelType.GuildText) return %>
                    <option value="<%= channel.id %>" <% if (channel.id === settings.logchannel) {%> selected <%} else {%> <% } %> > <%= `# ${channel.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
        </div>

        <br id="tickets">
        <a class="title">Tickets</a>
        <br><br>

        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Toggle</p>
              <p class="subtitle">Enables the ticket system</p>
              <div class="select" style="width: 100%;">
                <select name="tickets" value="<%= settings.tickets %>" placeholder="The ticket option" style="width: 100%;">
                  <option value="false" <% if (settings.tickets === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <option value="buttons" <% if (settings.tickets === 'buttons') {%> selected <%} else {%> <%} %>>Enabled, using Buttons</option>
                  <option value="reactions" <% if (settings.tickets === 'reactions') {%> selected <%} else {%> <%} %>>Enabled, using Reactions</option>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Category</p>
              <p class="subtitle">The category where the bot creates tickets in</p>
              <div class="select" style="width: 100%;">
                <select name="ticketcategory" value="<%= settings.ticketcategory %>" placeholder="The ticket category" style="width: 100%;">
                  <option value="false" <% if (settings.ticketcategory === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.channels.cache.forEach(channel => { %>
                    <% if (channel.type != Djs.ChannelType.GuildCategory) return %>
                    <option value="<%= channel.id %>" <% if (channel.id === settings.ticketcategory) {%> selected <%} else {%> <% } %> > <%= `› ${channel.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Log Channel</p>
              <p class="subtitle">The channel where the bot puts ticket logs in</p>
              <div class="select" style="width: 100%;">
                <select name="ticketlogchannel" value="<%= settings.ticketlogchannel %>" placeholder="The ticket log channel" style="width: 100%;">
                  <option value="false" <% if (settings.ticketlogchannel === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.channels.cache.forEach(channel => { %>
                    <% if (channel.type != Djs.ChannelType.GuildText) return %>
                    <option value="<%= channel.id %>" <% if (channel.id === settings.ticketlogchannel) {%> selected <%} else {%> <% } %> > <%= `# ${channel.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
        </div>
        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Access Role</p>
              <p class="subtitle">The role that can access tickets</p>
              <div class="select" style="width: 100%;">
                <select name="supportrole" value="<%= settings.supportrole %>" placeholder="The Support Role" style="width: 100%;">
                  <option value="false" <% if (settings.supportrole === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.roles.cache.forEach(role => { %>
                    <option value="<%= role.id %>" <% if (role.id === settings.supportrole) {%> selected <%} else {%> <% } %> > <%= `@ ${role.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Mention</p>
              <p class="subtitle">Pings the specified role every time a new ticket is created</p>
              <div class="select" style="width: 100%;">
                <select name="ticketmention" value="<%= settings.ticketmention %>" placeholder="The Role to mention" style="width: 100%;">
                  <option value="false" <% if (settings.ticketmention === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <option value="here" <% if (settings.ticketmention === 'here') {%> selected <%} else {%> <%} %>>@ here</option>
                  <option value="everyone" <% if (settings.ticketmention === 'everyone') {%> selected <%} else {%> <%} %>>@ everyone</option>
                  <% guild.roles.cache.forEach(role => { %>
                    <option value="<%= role.id %>" <% if (role.id === settings.ticketmention) {%> selected <%} else {%> <% } %> > <%= `@ ${role.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
        </div>

        <br id="moderation">
        <a class="title">Moderation</a>
        <br><br>

        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Message Shortener</p>
              <p class="subtitle">The amount of lines in a message to delete and send to a bin link (Setting this to 0 disables it)</p>
              <div class="control">
                <input class="input" type="number" name="msgshortener" value="<%= settings.msgshortener %>" placeholder="The message shortener value">
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Disabled commands</p>
              <p class="subtitle">Disable certain commands from the bot</p>
              <div class="control">
                <select name="disabledcmds" multiple data-type="tags" data-placeholder="The commands to disable">
                  <% commands.forEach(command => { %>
                    <option value="<%= command %>" <% if (settings.disabledcmds.split(',').includes(command)) {%> selected <%} else {%> <%} %>><%= command %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">DJ Role</p>
              <p class="subtitle">The DJ feature of the bot that limits the skip/etc commands</p>
              <div class="select" style="width: 100%;">
                <select name="djrole" value="<%= settings.djrole %>" placeholder="The DJ Role" style="width: 100%;">
                  <option value="false" <% if (settings.djrole === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.roles.cache.forEach(role => { %>
                    <option value="<%= role.id %>" <% if (role.id === settings.djrole) {%> selected <%} else {%> <% } %> > <%= `@ ${role.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
        </div>
        <div class="tile is-ancestor">
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Admin Role</p>
              <p class="subtitle">The role to replace the 'Administrator' permission</p>
              <div class="select" style="width: 100%;">
                <select name="adminrole" value="<%= settings.adminrole %>" placeholder="The Admin Role" style="width: 100%;">
                  <option value="false" <% if (settings.adminrole === 'false') {%> selected <%} else {%> <%} %>>Disabled</option>
                  <% guild.roles.cache.forEach(role => { %>
                    <option value="<%= role.id %>" <% if (role.id === settings.adminrole) {%> selected <%} else {%> <% } %> > <%= `@ ${role.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
          <div class="tile is-parent">
            <article class="tile is-child box">
              <p class="title">Mute Command</p>
              <p class="subtitle">Use the timeout feature or a role for the mute command</p>
              <div class="select" style="width: 100%;">
                <select name="mutecmd" value="<%= settings.mutecmd %>" placeholder="The value" style="width: 100%;">
                  <option value="timeout" <% if (settings.mutecmd === 'timeout') {%> selected <%} else {%> <%} %>>Use Discord's timeout feature</option>
                  <% guild.roles.cache.forEach(role => { %>
                    <option value="<%= role.id %>" <% if (role.id === settings.mutecmd) {%> selected <%} else {%> <% } %> > <%= `@ ${role.name}` %></option>
                  <% }) %>
                </select>
              </div>
            </article>
          </div>
        </div>
      </form>
        <br><br>
        <br><br>
        <br><br>
        <br><br>
      </div>
    </div>
  </div>
</section>

<%- include("partials/footer") %>